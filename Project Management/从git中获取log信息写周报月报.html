<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>从git中获取log信息写周报月报 - </title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style type="text/css">
  h1,h2,h3,h4,h5,h6,p,div,blockquote,ol,ul,li,img,li div{font-size:14px;font-family:"Hiragino Sans GB","Microsoft YaHei",tahoma,arial,simsun;line-height:21px;vertical-align:baseline;color:#0CF;word-wrap:break-word;word-break:normal;margin:10px 0;padding:0;}p{margin:20px 0 10px;}body{background-color:#1A1A1A;margin:10px;}embed,img{max-width:100%;margin:10px auto}embed{margin:5px auto;}strong,em{color:#C0F;}ol,ul{margin:0 0 10px 2em;}ul ul,ol ol,ul ol,ol ul{margin:0 0 5px 2em;}li{margin-bottom:5px;}h1,h2,h3,h4,h5,h6{color:#FC0;border-color:#FC0;margin:50px 0 10px;}h1{margin-top:100px;font-size:28px;line-height:32px;border-bottom:2px solid;padding-bottom:0;}h2{font-size:24px;line-height:28px;}h3{font-size:22px;line-height:26px;}h4{font-size:20px;line-height:24px;}h5{font-size:18px;line-height:22px;}h6{font-size:16px;line-height:20px;}code{font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace;font-size:12px;line-height:1.5;box-shadow:0 0 8px rgba(0,0,0,0.4);color:#C0F;background-color:#510065;border:1px solid #C0F;border-radius:3px;word-wrap:normal;padding:0 4px;}pre{display:inline-block;margin:0 0 10px;min-width: 100%;}pre>code{border:none!important;padding:5px 10px!important;}a,a:active,a:visited{font-weight:bold;color:#C0F;}a:hover{background-color:#510065;}hr{border-width:0;border-top:1px dashed #0CF;margin:20px 0;}blockquote{background-color:#005266;border-left:5px solid #0CF;border-radius:3px;padding:5px 10px;}blockquote p{margin:0;}
  </style>
  
  
  <meta charset="UTF-8"/>
  <meta name="author" content="潘霄鹏 - weibo.com/pxp1230">
  <meta name="keywords" content="潘霄鹏笔记">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  tex2jax: {inlineMath:[['$','$']],processEscapes:true}
  });
  </script>
  <script type="text/javascript" src="file:///storage/emulated/0/MathJax-master/MathJax-master/MathJax.js?config=TeX-AMS_HTML"></script>
  <script type="text/javascript" src="file:///C:/MathJax-master/MathJax-master/MathJax.js?config=TeX-AMS_HTML"></script>
  <script type="text/javascript" src="file:///storage/emulated/0/highlight/highlight.pack.js"></script>
  <script type="text/javascript" src="file:///C:/highlight/highlight.pack.js"></script>
  <script type="text/javascript" src="file:///storage/emulated/0/pxp1230.github.io.js"></script>
  <script type="text/javascript" src="file:///C:/pxp1230.github.io.js"></script>
  <script type="text/javascript">
  if(window.location.protocol!="file:"){var d=document,s=d.createElement('script');s.src='/pxp1230.github.io.js';d.head.appendChild(s);}
  </script>
</head>
<body>
<h1>入门</h1>
<p>获取一周的提交：</p>
<pre><code>git log --pretty=format:&quot;%an: %s&quot; --since=1.weeks</code></pre>
<p>获取具体某一天开始的提交：</p>
<pre><code>git log --pretty=format:&quot;%an: %s&quot; --since=&quot;2008-10-01&quot;</code></pre>
<p>获取具体某一天开始到某一天结束的提交：</p>
<pre><code>git log --pretty=format:&quot;%an: %s&quot; --since=&quot;2008-10-01&quot; --before=&quot;2008-11-01&quot;</code></pre>
<p>从远程仓库抓取最新数据，并查看远程仓库的日志：</p>
<pre><code>git fetch origin
git log origin --pretty=format:&quot;%an: %s&quot;</code></pre>
<blockquote>
<p>参考来源：<br />
<a href="https://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2">https://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2</a><br />
<a href="http://git.oschina.net/progit/2-Git-%E5%9F%BA%E7%A1%80.html">http://git.oschina.net/progit/2-Git-%E5%9F%BA%E7%A1%80.html</a></p>
</blockquote>
<h1 id="-format-">表格列出一些 format 支持的选项</h1>
<pre><code>选项 说明
    %H 提交对象（commit）的完整哈希字串
    %h 提交对象的简短哈希字串
    %T 树对象（tree）的完整哈希字串
    %t 树对象的简短哈希字串
    %P 父对象（parent）的完整哈希字串
    %p 父对象的简短哈希字串
    %an 作者（author）的名字
    %ae 作者的电子邮件地址
    %ad 作者修订日期（可以用 -date= 选项定制格式）
    %ar 作者修订日期，按多久以前的方式显示
    %cn 提交者(committer)的名字
    %ce 提交者的电子邮件地址
    %cd 提交日期
    %cr 提交日期，按多久以前的方式显示
    %s 提交说明</code></pre>
<h1>实战</h1>
<p>print git log.bat</p>
<pre><code>@echo off
cd /d F:\pxp1230.github.io\.git
setlocal
PATH=&quot;C:\Program Files (x86)\Git\cmd&quot;
set PATH&gt;nul
git fetch origin
git --no-pager log origin --pretty=format:&quot;%%s  %%an    %%ad&quot; --date=short --since=1.weeks
::git --no-pager log：不加--no-pager参数的话，必须按Q才能退出
::转义符号：如果要显示%本身时，需要在前面用%来转义
::%s：提交信息
::%an：作者
::%ad：提交日期</code></pre>
<p>获取最近一周的提交报告.bat</p>
<pre><code>@echo off
cd 获取最近一周的提交报告
WeekReport&gt;..\获取最近一周的提交报告.txt</code></pre>
<p>Program.cs</p>
<pre><code>using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Diagnostics;
using System.Windows.Forms;

class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        DirectoryInfo di = new DirectoryInfo(Environment.CurrentDirectory);
        FileInfo[] files = di.GetFiles(&quot;*.bat&quot;);
        if (files.Length == 1)
        {
            Process p = new Process();
            p.StartInfo.FileName = files[0].FullName;
            p.StartInfo.CreateNoWindow = true;
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardInput = true;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.StandardOutputEncoding = Encoding.UTF8;
            p.Start();
            string output = p.StandardOutput.ReadToEnd();
            p.WaitForExit();
            p.Close();
            StringBuilder sb = new StringBuilder();
            string[] lines = output.Split(&#39;\n&#39;);
            for (int i = 0; i &lt; lines.Length; i++)
            {
                string[] cells = lines[i].Split(&#39;\t&#39;);
                if (!cells[0].StartsWith(&quot;no message&quot;) &amp;&amp; !cells[0].StartsWith(&quot;Merge branch&quot;))
                {
                    string newLine = &quot;&quot;;
                    DateTime dt = new DateTime();
                    if (DateTime.TryParse(cells[2], out dt))
                    {
                        newLine += dt.ToString(&quot;yyyy/MM/dd&quot;) + &quot;\t&quot; + cells[1] + &quot;\t&quot; + cells[0];
                        sb.AppendLine(newLine);
                    }
                }
            }
            Clipboard.Clear(); //用前用后记得清除剪贴板
            if (sb.Length &gt; 0)
                Clipboard.SetText(sb.ToString());
            else
                Clipboard.SetText(&quot;没有记录！&quot;);
        }
    }
}</code></pre>
</body>
</html>
