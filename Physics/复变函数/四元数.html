<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>四元数 - </title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style type="text/css">
  body {
  font: 14px/200% "Hiragino Sans GB","Microsoft YaHei",tahoma,arial,simsun;
  color: #00CCFF;
  background: #1A1A1A;
  word-wrap: break-word;
  word-break: normal;
  }
  img {
  max-width:100%;
  }
  html,
  body,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  blockquote,
  ol,
  ul,
  li,
  img,
  li div{
    margin: 0;
    padding: 0;
    font: 14px/200% "Hiragino Sans GB","Microsoft YaHei",tahoma,arial,simsun;
    line-height: 22px;
    vertical-align: baseline;
    color: #00CCFF;
  }
  body {
    margin: 10px;
  }
  p,
  div {
    margin-bottom: 20px;
  }
  strong {
    font-weight: bold;
  }
  ol,
  ul {
    margin-left: 2em;
    margin-bottom: 20px;
  }
  ul ul,
  ol ol,
  ul ol,
  ol ul {
    margin-top: 10px;
  }
  li {
    margin-bottom: 10px;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-weight: lighter;
    text-transform: capitalize;
    margin-top: 20px;
    margin-bottom: 20px;
  }
  h1 {
    font-size: 24.624px;
    line-height: 29.548799999999996px;
  }
  h2 {
    font-size: 24.624px;
    line-height: 29.548799999999996px;
  }
  h3 {
    font-size: 23.44px;
    line-height: 28.128px;
  }
  h4 {
    font-size: 22.16px;
    line-height: 26.592px;
  }
  h5 {
    font-size: 22.16px;
    line-height: 26.592px;
  }
  h6 {
    font-size: 22.16px;
    line-height: 26.592px;
  }
  img {
    margin-bottom: 20px;
  }
  h1 img,
  h2 img,
  h3 img,
  h4 img,
  h5 img,
  h6 img,
  p img {
    margin-bottom: 0;
  }
  pre {
    color: #00CCFF;
    margin-bottom: 20px;
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  code {
    font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace;
    font-size:12px;line-height:1.5;
    box-shadow:0 0 8px rgba(0, 0, 0, 0.4);
    padding:1em !important;
    display:block;
  }
  h1 {
    text-transform: uppercase;
    font-weight: bold;
    border-bottom: 1px solid;
    padding-bottom: 4px;
  }
  h2 {
    border-bottom: 1px solid;
    padding-bottom: 4px;
  }
  h3,
  h4,
  h5,
  h6 {
    border-bottom: none;
  }
  html body {
    background-color: #1A1A1A;
  }
  html h1,
  html h2,
  html h3,
  html h4,
  html h5,
  html h6 {
    color: #FFCC00;
    border-color: #FFCC00;
  }
  html a,
  html a:active,
  html a:visited {
    color: #FFCC00;
  }
  html a:hover {
    background-color: #554400;
  }
  html a,
  html a:active,
  html a:visited,
  html code.url {
    color: #FFCC00;
  }
  html h2,
  html h3,
  html h4,
  html h5,
  html h6 {
    color: #FFCC00;
  }
  hr{
  border:0;background-color:#CC0000;height:4px;margin:40px auto;
  }
  blockquote {
  background:#073642;
  border-left:10px solid #005266;
  margin:1.5em 10px;
  padding:.5em 10px;
  }
  blockquote code {
    color: #00CCFF;
    font-family: "Hiragino Sans GB","Microsoft YaHei",tahoma,arial,simsun;
  }
  blockquote pre {
    margin:0;
    padding:0;
  }
  blockquote p,blockquote div{
    margin-bottom:0;
  }
  strong{color:#FFCC00;}
  </style>
  
  
  <meta charset="UTF-8"/>
  <meta name="author" content="潘霄鹏 - weibo.com/pxp1230">
  <meta name="keywords" content="潘霄鹏笔记">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  tex2jax: {inlineMath:[['$','$']],processEscapes:true}
  });
  </script>
  <script type="text/javascript"
  src="file:///storage/emulated/0/MathJax-master/MathJax-master/MathJax.js?config=TeX-AMS_HTML">
  </script>
  <script type="text/javascript"
  src="file:///C:/MathJax-master/MathJax-master/MathJax.js?config=TeX-AMS_HTML">
  </script>
  <link rel="stylesheet" href="file:///storage/emulated/0/highlight/styles/pojoaque.css">
  <script type="text/javascript"
  src="file:///storage/emulated/0/highlight/highlight.pack.js">
  </script>
  <link rel="stylesheet" href="file:///C:/highlight/styles/pojoaque.css">
  <script type="text/javascript"
  src="file:///C:/highlight/highlight.pack.js">
  </script>
  <script type="text/javascript">
  document.onkeydown=function(e){if(typeof(disableListenKeyDownEvent)=='undefined'){if(e.keyCode==88||e.keyCode==46){window.open('','_self');window.close()}else if(e.keyCode==8)window.open('index.html','_self')}}
  if(window.location.protocol!="file:"){var d=document,s=d.createElement('script');s.src='/pxp1230.github.io.js';(d.head||d.body).appendChild(s);}else{hljs.initHighlightingOnLoad();}
  </script>
</head>
<body>
<p>四元数常用于图形学，它是图形学中3种旋转方式之一，其他两种是欧拉角、矩阵（还有一种叫轴-角对，很少用到）</p>
<p>四元数包含一个标量分量和一个三维向量分量：</p>
<p><img src="四元数/065bfbf2-2dcd-4f72-885d-279b16df8fb4.png" alt="" /></p>
<div>
$Q = w + xi + yj + zk$
</div>
<p><img src="四元数/84242b6b-a2b3-4aec-9936-38a7f7a87d65.png" alt="" /></p>
<h1>
轴-角对转四元数（左右手法则均适用）（轴${\hat n_a}$-角$\theta_a $对）
</h1>
<p><img src="四元数/688ef9ec-0ad0-4071-87da-f4f4b7b50642.png" alt="" /></p>
<h1>负四元数</h1>
<p>q和-q代表的旋转是相同的</p>
<h1>单位四元数</h1>
<p>意义：应用单位四元数的旋转，方位不改变</p>
<p>单位四元数：$\theta $为360°的整数倍，旋转轴任意</p>
<p><img src="四元数/7e3dd219-d8a1-4a49-9762-23503a27c59d.png" alt="" /></p>
<h1>四元数的模</h1>
<div>
$\left\| q \right\| = \sqrt {{w^2} + {{\left\| {\vec v} \right\|}^2}}  = \sqrt {{{\cos }^2}\left( {\frac{\theta }{2}} \right) + {{\left( {\sin \left( {\frac{\theta }{2}} \right)\hat n} \right)}^2}}  = \sqrt {{{\cos }^2}\left( {\frac{\theta }{2}} \right) + {{\sin }^2}\left( {\frac{\theta }{2}} \right)}  = 1$
</div>
<blockquote>
<p>模为1的四元数为标准化四元数，只有标准化四元数才能表示旋转</p>
</blockquote>
<h1>四元数共轭和逆</h1>
<p><img src="四元数/8a522f3a-e6a9-4f5f-9c03-543ed8a661d0.png" alt="" /></p>
<div>
${q^{ - 1}} = \frac{{{q^*}}}{{\left\| q \right\|}}$
</div>
<p>当使用标准化四元数时：</p>
<div>
${q^{ - 1}} = {q^*}$
，
其中q和${q^*}$代表相反的角位移
</div>
<h1>四元数乘法（叉乘）的标准化定义</h1>
<p><img src="四元数/993456c7-b505-414a-9c1b-d1f6e90df8f1.png" alt="" /></p>
<h1>运算法则</h1>
<p>(ab)c=a(bc)</p>
<p>ab≠ba</p>
<div>
$\left\| {ab} \right\| = \left\| a \right\|\left\| b \right\|$
</div>
<div>
${\left( {ab} \right)^{ - 1}} = {b^{ - 1}}{a^{ - 1}}$
</div>
<p>对3D点p（<img src="四元数/7bc4ed0d-7214-4bd7-a0d4-b8d7871abd9e.png" alt="" />）应用旋转：<br />
<div><br />
$p' = qp{q^{ - 1}}$<br />
</div></p>
<p>先进行a旋转再进行b旋转等价于执行ba旋转（图形学对四元数乘法定义进行了修改——$p' = {q^{ - 1}}pq$，使之运算顺序与旋转发生顺序一致，这比坚持正式标准更加重要）</p>
<div>
$\left( {\Delta q} \right){q_0} = {q_1} \Rightarrow \Delta q = {q_1}q_0^{ - 1}$
</div>
<div>
$slerp\left( {{q_0},{q_1},t} \right) = {q_0}{\left( {{q_1}q_0^{ - 1}} \right)^t}$
</div>
<p><img src="四元数/d1a52b71-e702-464c-9682-ba39ac825ed8.png" alt="" /></p>
<p>图形学中的slerp：</p>
<div>
$slerp\left( {{q_0},{q_1},t} \right) = \frac{{\sin \left( {1 - t} \right)\theta }}{{\sin \theta }}{q_0} + \frac{{\sin t\theta }}{{\sin \theta }}{q_1}$
<br>其中$\cos \theta  = {q_1} \cdot {q_2}$
</div>
<h1>四元数对数和指数</h1>
<p>四元数的指数总是返回标准化四元数<br />
<div><br />
$\exp \left( {\log q} \right) = q$<br />
</div></p>
<h1>四元数求幂的数学定义</h1>
<div>
${q^t} = \exp \left( {t\log q} \right)$
<br>例子：${q^{1/3}}$的意义是q的1/3的角位移
</div>
</body>
</html>
