<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>6. 数值方法 - </title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style type="text/css">
  body {
  font: 14px/200% "Hiragino Sans GB","Microsoft YaHei",tahoma,arial,simsun;
  color: #00CCFF;
  background: #1A1A1A;
  word-wrap: break-word;
  word-break: normal;
  }
  img {
  max-width:100%;
  }
  html,
  body,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  blockquote,
  ol,
  ul,
  li,
  img,
  li div{
    margin: 0;
    padding: 0;
    font: 14px/200% "Hiragino Sans GB","Microsoft YaHei",tahoma,arial,simsun;
    line-height: 22px;
    vertical-align: baseline;
    color: #00CCFF;
  }
  body {
    margin: 10px;
  }
  p,
  div {
    margin-bottom: 20px;
  }
  strong {
    font-weight: bold;
  }
  ol,
  ul {
    margin-left: 2em;
    margin-bottom: 20px;
  }
  ul ul,
  ol ol,
  ul ol,
  ol ul {
    margin-top: 10px;
  }
  li {
    margin-bottom: 10px;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-weight: lighter;
    text-transform: capitalize;
    margin-top: 20px;
    margin-bottom: 20px;
  }
  h1 {
    font-size: 24.624px;
    line-height: 29.548799999999996px;
  }
  h2 {
    font-size: 24.624px;
    line-height: 29.548799999999996px;
  }
  h3 {
    font-size: 23.44px;
    line-height: 28.128px;
  }
  h4 {
    font-size: 22.16px;
    line-height: 26.592px;
  }
  h5 {
    font-size: 22.16px;
    line-height: 26.592px;
  }
  h6 {
    font-size: 22.16px;
    line-height: 26.592px;
  }
  img {
    margin-bottom: 20px;
  }
  h1 img,
  h2 img,
  h3 img,
  h4 img,
  h5 img,
  h6 img,
  p img {
    margin-bottom: 0;
  }
  pre {
    color: #00CCFF;
    margin-bottom: 20px;
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  code {
    font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace;
    font-size:12px;line-height:1.5;
    box-shadow:0 0 8px rgba(0, 0, 0, 0.4);
    padding:1em !important;
    display:block;
  }
  h1 {
    text-transform: uppercase;
    font-weight: bold;
    border-bottom: 1px solid;
    padding-bottom: 4px;
  }
  h2 {
    border-bottom: 1px solid;
    padding-bottom: 4px;
  }
  h3,
  h4,
  h5,
  h6 {
    border-bottom: none;
  }
  html body {
    background-color: #1A1A1A;
  }
  html h1,
  html h2,
  html h3,
  html h4,
  html h5,
  html h6 {
    color: #FFCC00;
    border-color: #FFCC00;
  }
  html a,
  html a:active,
  html a:visited {
    color: #FFCC00;
  }
  html a:hover {
    background-color: #554400;
  }
  html a,
  html a:active,
  html a:visited,
  html code.url {
    color: #FFCC00;
  }
  html h2,
  html h3,
  html h4,
  html h5,
  html h6 {
    color: #FFCC00;
  }
  hr{
  border:0;background-color:#CC0000;height:4px;margin:40px auto;
  }
  blockquote {
  background:#073642;
  border-left:10px solid #005266;
  margin:1.5em 10px;
  padding:.5em 10px;
  }
  blockquote code {
    color: #00CCFF;
    font-family: "Hiragino Sans GB","Microsoft YaHei",tahoma,arial,simsun;
  }
  blockquote pre {
    margin:0;
    padding:0;
  }
  blockquote p,blockquote div{
    margin-bottom:0;
  }
  strong{color:#FFCC00;}
  </style>
  
  
  <meta charset="UTF-8"/>
  <meta name="author" content="潘霄鹏 - weibo.com/pxp1230">
  <meta name="keywords" content="潘霄鹏笔记">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  tex2jax: {inlineMath:[['$','$']],processEscapes:true}
  });
  </script>
  <script type="text/javascript"
  src="file:///storage/emulated/0/MathJax-master/MathJax-master/MathJax.js?config=TeX-AMS_HTML">
  </script>
  <script type="text/javascript"
  src="file:///C:/MathJax-master/MathJax-master/MathJax.js?config=TeX-AMS_HTML">
  </script>
  <link rel="stylesheet" href="file:///storage/emulated/0/highlight/styles/pojoaque.css">
  <script type="text/javascript"
  src="file:///storage/emulated/0/highlight/highlight.pack.js">
  </script>
  <link rel="stylesheet" href="file:///C:/highlight/styles/pojoaque.css">
  <script type="text/javascript"
  src="file:///C:/highlight/highlight.pack.js">
  </script>
  <script type="text/javascript">
  document.onkeydown=function(e){if(typeof(disableListenKeyDownEvent)=='undefined'){if(e.keyCode==88||e.keyCode==46){window.open('','_self');window.close()}else if(e.keyCode==8)window.open('index.html','_self')}}
  if(window.location.protocol!="file:"){var d=document,s=d.createElement('script');s.src='/pxp1230.github.io.js';(d.head||d.body).appendChild(s);}else{hljs.initHighlightingOnLoad();}
  </script>
</head>
<body>
<h2 id="---linearsystem">解线性方程组 - LinearSystem类</h2>
<p>求A*X=B的解（A是2x2矩阵、3x3矩阵、NxN矩阵）：<br />
Solve2(float[,] A, float[] B, out float[] X, float zeroTolerance)<br />
Solve2(float[,] A, float[] B, out Vector2 X, float zeroTolerance)<br />
Solve3(float[,] A, float[] B, out float[] X, float zeroTolerance)<br />
Solve3(float[,] A, float[] B, out Vector3 X, float zeroTolerance)<br />
Solve(float[,] A, float[] B, out float[] X)<br />
SolveTridiagonal(float[] A, float[] B, float[] C, float[] RightSide, out float[] X)<br />
三对角矩阵：<br />
A - 低一行的对角线<br />
B - 主对角线<br />
C - 高一行的对角线<br />
以4x4矩阵为例：<br />
B C 0 0<br />
A B C 0<br />
0 A B C<br />
0 0 A B<br />
Inverse(float[,] A, out float[,] invA)<br />
求A矩阵的逆矩阵，如果A没有逆矩阵则返回null</p>
<h2 id="---eigendecomposition">求矩阵的特征值和特征向量 - EigenDecomposition类</h2>
<p>static EigenData Solve(float[,] symmetricSquareMatrix, bool increasingSort);<br />
参数1必须是对称方阵</p>
<h2 id="---rootfinderpolynomial">多项式相关计算 - RootFinder类、Polynomial类</h2>
<p>RootFinder类 - 求多项式的根：<br />
● N次多项式，x的次数从N到0排列，多项式值为0，例如：c4*x^4+c3*x^3+c2*x^2+c1*x+c0 = 0<br />
Linear(float c0, float c1, out float root, float epsilon = MathfEx.ZeroTolerance)<br />
N=1<br />
Quadratic(float c0, float c1, float c2, out QuadraticRoots roots, float epsilon)<br />
N=2<br />
Cubic(float c0, float c1, float c2, float c3, out CubicRoots roots, float epsilon)<br />
N=3<br />
Quartic(float c0, float c1, float c2, float c3, float c4, out QuarticRoots roots, float epsilon)<br />
N=4<br />
PolynomialBound(Polynomial poly, float epsilon)<br />
获取根的范围（[-return..return]），返回-1表示多项式为常数<br />
Polynomial(Polynomial poly, float xMin, float xMax, out float[] roots, int digits, float epsilon)<br />
N=?<br />
Polynomial(Polynomial poly, out float[] roots, int digits, float epsilon)<br />
N=?<br />
BrentsMethod(Func<float, float> function, float x0, float x1, out BrentsRoot root, int maxIterations, float negativeTolerance, float positiveTolerance, float stepTolerance, float segmentTolerance)<br />
求多项式根的Brent解法：</p>
<p>Polynomial类：<br />
● float this[int index]构造，顺序如：c0 + c1*x + c2*x^2, array will be [c0,c1,c2]<br />
Polynomial CalcDerivative();<br />
返回多项式的导数<br />
void Compress(float epsilon = MathfEx.ZeroTolerance);<br />
压缩多项式：删除系数近似于0的项，最高次项系数转换成1<br />
float Eval(float t);<br />
求多项式的值</p>
<h2>求解常微分方程</h2>
<p>常微分方程：y'(t) = F(t,y)，求y<br />
例如已知y'(t) = (cos(t))^2 - tan(t) * y(t)，y(0) = 2，解得y(t)=(sin(t) + 2) * cos(t)<br />
Euler法 - OdeEuler类：用法参考OdeRungeKutta4类<br />
中值法 - OdeMidpoint类：用法参考OdeRungeKutta4类<br />
四阶龙格-库塔法（最精确） - OdeRungeKutta4类：</p>
<pre><code>float t = 0.0f;//起始值
float tEnd = 4.0f;
float tStep = 0.3f;
float[] y = { 2.0f };//需要指定一个起始值，如y[0]=y(t)、y[1]=y&#39;(t)、y[2]=y&#39;&#39;(t)……
//如_yd[0]=y&#39;(t)、_yd[1]=y&#39;’(t)……
Dest.Math.OdeFunction Func = delegate(float _t, float[] _y, float[] _yd) { _yd[0] = Mathf.Pow(Mathf.Cos(_t), 2) - Mathf.Tan(_t) * _y[0]; };
//这里演示的是一阶常微分方程，所以参数1为1
OdeRungeKutta4 rkSolver = new OdeRungeKutta4(1, tStep, Func);
List&lt;Vector2&gt; rkPoints = new List&lt;Vector2&gt;();
while (t &lt; tEnd)
{
    rkPoints.Add(new Vector2(t, y[0]));
    rkSolver.Update(t, y, ref t, y);
}</code></pre>
<h2 id="---integrator">计算一重积分 - Integrator类</h2>
<p>static float TrapezoidRule(Func<float, float> function, float a, float b, int sampleCount)<br />
Evaluates integral ∫f(x)dx on [a,b] interval using trapezoidal rule. sampleCount must be greater or equal to 2.<br />
示例：Integrator.TrapezoidRule((x) =&gt; { return Mathf.Sin(x) + 2; }, xStart, xEnd, 10);</p>
<p>static float RombergIntegral(Func<float, float> function, float a, float b, int order)<br />
Evaluates integral ∫f(x)dx on [a,b] interval using Romberg's method. Integration order must be positive (order &gt; 0).<br />
示例：Integrator.RombergIntegral((x) =&gt; { return Mathf.Sin(x) + 2; }, xStart, xEnd, 4);</p>
<p>static float GaussianQuadrature(Func<float, float> function, float a, float b)<br />
Evaluates integral ∫f(x)dx on [a,b] interval using Gaussian quadrature rule (five Legendre polynomials).<br />
示例：Integrator.GaussianQuadrature((x) =&gt; { return Mathf.Sin(x) + 2; }, xStart, xEnd);</p>
</body>
</html>
