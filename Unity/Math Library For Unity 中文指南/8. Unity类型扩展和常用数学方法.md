**● 所有运算遵循左手螺旋定则**

## Vector2ex ##

static readonly Vector2 Zero
Vector2(0.0f, 0.0f)

static readonly Vector2 One
Vector2(1.0f, 1.0f)

static readonly Vector2 UnitX
Vector2(1.0f, 0.0f)

static readonly Vector2 UnitY
Vector2(0.0f, 1.0f)

static readonly Vector2 PositiveInfinity
Vector2(float.PositiveInfinity, float.PositiveInfinity);

static readonly Vector2 NegativeInfinity
Vector2(float.NegativeInfinity, float.NegativeInfinity)

static Vector2 Replicate(float value)
Vector2(value, value)

static float Length(this Vector2 vector)
static float LengthSqr(this Vector2 vector)

static float DotPerp(this Vector2 vector, Vector2 value)
static float DotPerp(this Vector2 vector, ref Vector2 value)
static float DotPerp(ref Vector2 vector, ref Vector2 value)
计算叉乘（x0*y1 - y0*x1）

static float Dot(this Vector2 vector, Vector2 value)
static float Dot(this Vector2 vector, ref Vector2 value)
static float Dot(ref Vector2 vector, ref Vector2 value)

static Vector2 Perp(this Vector2 vector)
计算垂线，Returns (y,-x)

static float AngleDeg(this Vector2 vector, Vector2 target)
返回值范围 [0..180] range.
static float AngleRad(this Vector2 vector, Vector2 target)
返回值范围 [0..PI] range.

static Vector3 ToVector3XY(this Vector2 vector)
static Vector3 ToVector3XZ(this Vector2 vector)
static Vector3 ToVector3YZ(this Vector2 vector)

static string ToStringEx(this Vector2 vector)

static float Normalize(ref Vector2 vector, float epsilon = MathfEx.ZeroTolerance)
归一化 and returns it's length before normalization.
static float SetLength(ref Vector2 vector, float lengthValue, float epsilon = Mathfex.ZeroTolerance)
设置向量模长. Returns new vector length or 0 if vector's initial length is less than epsilon.
static float GrowLength(ref Vector2 vector, float lengthDelta, float epsilon = Mathfex.ZeroTolerance)
在原模长基础上增加长度. Returns new vector length or 0 if vector's initial length is less than epsilon.

## Vector3ex ##

static readonly Vector3 Zero
Vector3(0.0f, 0.0f, 0.0f)

static readonly Vector3 One
Vector3(1.0f, 1.0f, 1.0f)

static readonly Vector3 UnitX
Vector3(1.0f, 0.0f, 0.0f)

static readonly Vector3 UnitY
Vector3(0.0f, 1.0f, 0.0f)

static readonly Vector3 UnitZ
Vector3(0.0f, 0.0f, 1.0f)

static readonly Vector3 PositiveInfinity
Vector3(float.PositiveInfinity, float.PositiveInfinity, float.PositiveInfinity)

static readonly Vector3 NegativeInfinity
Vector3(float.NegativeInfinity, float.NegativeInfinity, float.NegativeInfinity)

static Vector3 Replicate(float value)
Vector3(value, value, value)

static float Length(this Vector3 vector)
static float LengthSqr(this Vector3 vector)

static float Dot(this Vector3 vector, Vector3 value)
static float Dot(this Vector3 vector, ref Vector3 value)
static float Dot(ref Vector3 vector, ref Vector3 value)

static float AngleDeg(this Vector3 vector, Vector3 target)
返回值范围 [0..180] range.
static float AngleRad(this Vector3 vector, Vector3 target)
返回值范围 [0..PI] range.
static float SignedAngleDeg(this Vector3 vector, Vector3 target, Vector3 normal)
返回值范围 [-180..180] range.
static float SignedAngleRad(this Vector3 vector, Vector3 target, Vector3 normal)
返回值范围 [-PI..PI] range.
static float AngleDeg(Vector3 v0, Vector3 v1, Vector3 v2)
计算∠102，返回值范围 [0..180] range.
static float AngleRad(Vector3 v0, Vector3 v1, Vector3 v2)
计算∠102，返回值范围 [0..PI] range.
static float SignedAngleDeg(Vector3 v0, Vector3 v1, Vector3 v2, Vector3 normal)
计算∠102，返回值范围 [-180..180] range.
static float SignedAngleRad(Vector3 v0, Vector3 v1, Vector3 v2, Vector3 normal)
计算∠102，返回值范围 [-PI..PI] range.

static Vector3 Cross(this Vector3 vector, Vector3 value)
static Vector3 Cross(this Vector3 vector, ref Vector3 value)
static Vector3 Cross(ref Vector3 vector, ref Vector3 value)
叉乘
static Vector3 UnitCross(this Vector3 vector, Vector3 value)
static Vector3 UnitCross(this Vector3 vector, ref Vector3 value)
static Vector3 UnitCross(ref Vector3 vector, ref Vector3 value)
叉乘，返回值经过归一化

static Vector2 ToVector2XY(this Vector3 vector)
static Vector2 ToVector2XZ(this Vector3 vector)
static Vector2 ToVector2YZ(this Vector3 vector)
static Vector2 ToVector2(this Vector3 vector, ProjectionPlanes projectionPlane)
将vector投影到XY、XZ或YZ平面
static ProjectionPlanes GetProjectionPlane(this Vector3 vector)
例如：三分量里如果y最大，则返回ProjectionPlanes.XZ

static string ToStringEx(this Vector3 vector)

static float Normalize(ref Vector3 vector, float epsilon = MathfEx.ZeroTolerance)
归一化 and returns it's length before normalization.
static float SetLength(ref Vector3 vector, float lengthValue, float epsilon = Mathfex.ZeroTolerance)
设置向量模长. Returns new vector length or 0 if vector's initial length is less than epsilon.
static float GrowLength(ref Vector3 vector, float lengthDelta, float epsilon = Mathfex.ZeroTolerance)
在原模长基础上增加长度. Returns new vector length or 0 if vector's initial length is less than epsilon.

static void CreateOrthonormalBasis(out Vector3 u, out Vector3 v, ref Vector3 w)
根据w生成正交基，w必须是归一化向量. {U,V,W} is an orthonormal basis.

static bool SameDirection(Vector3 value0, Vector3 value1)
判断夹角是否为锐角，Returns true if Dot(value0,value1) > 0
Quaternionex

static Quaternion DeltaTo(this Quaternion Q1, Quaternion Q2)
Q1*Q=Q2，返回Q（= Quaternion.Inverse(Q1) * Q2）

static string ToStringEx(this Quaternion quat)

## Matrix4x4ex ##

*Unity使用左乘矩阵，下标顺序如下：
0	4	8	12
1	5	9	13
2	6	10	14
3	7	11	15

static readonly Matrix4x4 Identity

static void RotationMatrixToQuaternion(ref Matrix4x4 matrix, out Quaternion quaternion)
static void QuaternionToRotationMatrix(Quaternion quaternion, out Matrix4x4 matrix)
static void QuaternionToRotationMatrix(ref Quaternion quaternion, out Matrix4x4 matrix)
Quaternion、Matrix4x4互转

创建几何变换矩阵：
static void CreateTranslation(Vector3 position, out Matrix4x4 matrix)
static void CreateTranslation(ref Vector3 position, out Matrix4x4 matrix)
static void CreateScale(Vector3 scale, out Matrix4x4 matrix)
static void CreateScale(ref Vector3 scale, out Matrix4x4 matrix)
static void CreateScale(float scale, out Matrix4x4 matrix)
static void CreateRotationEuler(float eulerX, float eulerY, float eulerZ, out Matrix4x4 matrix)
static void CreateRotationEuler(Vector3 eulerAngles, out Matrix4x4 matrix)
static void CreateRotationEuler(ref Vector3 eulerAngles, out Matrix4x4 matrix)
(order is the same as in Quaternion.Euler() method)
static void CreateRotationX(float angleInDegrees, out Matrix4x4 matrix)
static void CreateRotationY(float angleInDegrees, out Matrix4x4 matrix)
static void CreateRotationZ(float angleInDegrees, out Matrix4x4 matrix)
static void CreateRotationAngleAxis(float angleInDegrees, Vector3 rotationAxis, out Matrix4x4 matrix)
(function will normalize axis)
static void CreateRotationAngleUnitAxis(float angleInDegrees, Vector3 normalizedAxis, out Matrix4x4 matrix)
(caller must provide unit-length axis)
static void CreateRotation(Vector3 rotationOrigin, Quaternion rotation, out Matrix4x4 result)
static void CreateRotation(ref Vector3 rotationOrigin, ref Quaternion rotation, out Matrix4x4 result)
static void CreateSRT(Vector3 scaling, Quaternion rotation, Vector3 translation, out Matrix4x4 result)
static void CreateSRT(ref Vector3 scaling, ref Quaternion rotation, ref Vector3 translation, out Matrix4x4
result)
顺序: scaling, rotation, translation.
static void CreateSRT(float scaling, Quaternion rotation, Vector3 translation, out Matrix4x4 result)
static void CreateSRT(float scaling, ref Quaternion rotation, ref Vector3 translation, out Matrix4x4
result)
顺序: uniform scaling, rotation, translation.
static void CreateSRT(Vector3 scaling, Vector3 rotationOrigin, Quaternion rotation, Vector3 translation,
out Matrix4x4 result)
static void CreateSRT(ref Vector3 scaling, ref Vector3 rotationOrigin, ref Quaternion rotation, ref Vector3
translation, out Matrix4x4 result)
顺序: scaling, moving to rotation origin, rotation, moving to translation point.
static void CreateSRT(float scaling, Vector3 rotationOrigin, Quaternion rotation, Vector3 translation, out
Matrix4x4 result)
static void CreateSRT(float scaling, ref Vector3 rotationOrigin, ref Quaternion rotation, ref Vector3
translation, out Matrix4x4 result)
顺序: uniform scaling, moving to rotation origin, rotation, moving to translation point.
static void CreateRT(Quaternion rotation, Vector3 translation, out Matrix4x4 result)
static void CreateRT(ref Quaternion rotation, ref Vector3 translation, out Matrix4x4 result)
顺序: rotation, translation.
static void CreateRT(Vector3 rotationOrigin, Quaternion rotation, Vector3 translation, out Matrix4x4
result)
static void CreateRT(ref Vector3 rotationOrigin, ref Quaternion rotation, ref Vector3 translation, out
Matrix4x4 result)
顺序: moving to rotation origin, rotation, moving to translation point.
static void CreateST(Vector3 scaling, Vector3 translation, out Matrix4x4 result)
static void CreateST(ref Vector3 scaling, ref Vector3 translation, out Matrix4x4 result)
顺序无关
static void CreateRotationFromColumns(Vector3 column0, Vector3 column1, Vector3 column2, out Matrix4x4
matrix)
static void CreateRotationFromColumns(ref Vector3 column0, ref Vector3 column1, ref Vector3 column2, out
Matrix4x4 matrix)

static void Transpose(ref Matrix4x4 matrix, out Matrix4x4 transpose)
static void Transpose(ref Matrix4x4 matrix)
转置矩阵

static float CalcDeterminant(ref Matrix4x4 matrix)
行列式

static void Inverse(ref Matrix4x4 matrix, out Matrix4x4 inverse, float epsilon = MathfEx.ZeroTolerance)
static void Inverse(ref Matrix4x4 matrix, float epsilon = MathfEx.ZeroTolerance)
逆矩阵

static void CopyMatrix(ref Matrix4x4 source, out Matrix4x4 destination)
拷贝

矩阵乘法：
static void Multiply(ref Matrix4x4 matrix0, ref Matrix4x4 matrix1, out Matrix4x4 result)
static void Multiply(ref Matrix4x4 matrix, float scalar)
static void Multiply(ref Matrix4x4 matrix, float scalar, out Matrix4x4 result)
static Vector4 Multiply(ref Matrix4x4 matrix, Vector4 vector)
static Vector4 Multiply(ref Matrix4x4 matrix, ref Vector4 vector)
matrix*vector

创建投影变换矩阵：
static void CreateShadowDirectional(Plane3 shadowPlane, Vector3 dirLightOppositeDirection, out Matrix4x4 result)
static void CreateShadowDirectional(ref Plane3 shadowPlane, ref Vector3 dirLightOppositeDirection, out Matrix4x4 result)
平行投影矩阵（参数dirLightOppositeDirection是平行光照射的反方向）
static void CreateShadowPoint(Plane3 shadowPlane, Vector3 pointLightPosition, out Matrix4x4 result)
static void CreateShadowPoint(ref Plane3 shadowPlane, ref Vector3 pointLightPosition, out Matrix4x4 result)
透视投影矩阵（参数pointLightPosition是点光源位置）
static void CreateShadow(Plane3 shadowPlane, Vector4 lightData, out Matrix4x4 result)
static void CreateShadow(ref Plane3 shadowPlane, ref Vector4 lightData, out Matrix4x4 result)
投影矩阵（参数lightData可以是平行光也可以是点光源，lightData.w为0时是平行光照射的反方向，lightData.w为1时是点光源位置）

## Mathfex ##

const float ZeroTolerance
1E-5f
const float NegativeZeroTolerance
-1E-5f
const float ZeroToleranceSqr
(1E-5f)^2
const float Pi
π
const float HalfPi = 0.5f * Pi
π/2
const float TwoPi = 2f * Pi
2π

static float EvalInvCubic(float x)
计算x^1/3
static float EvalQuadratic(float x, float a, float b, float c)
计算二次方程式a*x^2 + b*x + c
static float EvalSigmoid(float x)
计算S型方程式x^2 * (3 - 2*x)，用于缓动动画（x=0→1）
static float EvalGaussian(float x, float a, float b, float c)
计算一维正态分布a * e^(-(x-b) 2 / 2*c 2 )
static float EvalGaussian2D(float x, float y, float x0, float y0, float A, float a, float b, float c)
计算二维正态分布A * e^(-(a*(x - x0) 2 + 2*b*(x - x0)*(y - y0) + c*(y - y0) 2 ))
static float InvSqrt(float value)
计算1/√value

插值算法：
static float Lerp(float value0, float value1, float factor)
线性插值，参数factor will be clamped in [0..1]
static float LerpUnclamped(float value0, float value1, float factor)
static float SigmoidInterp(float value0, float value1, float factor)
S型插值，参数factor will be clamped in [0..1]
static float SinInterp(float value0, float value1, float factor)
Sin插值，参数factor will be clamped in [0..1]
static float CosInterp(float value0, float value1, float factor)
Cos插值，参数factor will be clamped in [0..1]
static float WobbleInterp(float value0, float value1, float factor)
弹簧插值（弹簧固定点在终点），参数factor will be clamped in [0..1]
static float CurveInterp(float value0, float value1, float factor, AnimationCurve curve)
动画曲线插值，参数factor will be clamped in [0..1]
static float FuncInterp(float value0, float value1, float factor, System.Func<float, float> func)
自定义函数插值，参数factor will be clamped in [0..1]

static bool Near(float value0, float value1, float epsilon = Mathfex.ZeroTolerance)
返回abs(v0-v1)<eps
static bool NearZero(float value, float epsilon = Mathfex.ZeroTolerance)
返回abs(v)<eps

坐标转换：
static Vector2 CartesianToPolar(Vector2 cartesianCoordinates)
2D笛卡尔坐标转换成2D极坐标（长度x >= 0, 0 <= 弧度y < 2pi）
示例：(0,0)→(0,0)
static Vector2 PolarToCartesian(Vector2 polarCoordinates)
2D极坐标转换成2D笛卡尔坐标
static Vector3 CartesianToSpherical(Vector3 cartesianCoordinates)
3D笛卡尔坐标转换成3D球面坐标（长度x >= 0, 0 <= XZ平面上与X轴的夹角弧度y < 2pi, 0 <= 与Y轴的夹角弧度z < pi）
示例：(0,0,0)→(0,0,0)
static Vector3 SphericalToCartesian(Vector3 sphericalCoordinates)
3D球面坐标转换成3D笛卡尔坐标
static Vector3 CartesianToCylindrical(Vector3 cartesianCoordinates)
3D笛卡尔坐标转换成3D柱面坐标（XZ平面极坐标x >= 0, 0 <= XZ平面极坐标y < 2pi, 高度z）
static Vector3 CylindricalToCartesian(Vector3 cylindricalCoordinates)
3D柱面坐标转换成3D笛卡尔坐标



























